CREATE SCHEMA `greenb_cms` DEFAULT CHARACTER SET utf8 ;

CREATE TABLE `greenb_cms`.`tokens` (
  `uid` int(10) unsigned NOT NULL,
  `token` varchar(40) NOT NULL,
  `last_access_ip` varchar(64) DEFAULT NULL,
  `expired` timestamp,
  `last_access` datetime DEFAULT NULL,
  `created` datetime DEFAULT NULL,
  KEY `idx_uid` (`uid`),
  KEY `idx_token` (`token`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `greenb_cms`.`masterusers` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `email` varchar(128) NOT NULL,
  `password` varchar(64) NOT NULL,
  `name` varchar(100) NOT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT '1',
  `created` datetime DEFAULT NULL,
  `modified` datetime DEFAULT NULL,

  PRIMARY KEY (`id`),
  KEY `loginid_idx` (`email`,`password`),
  KEY `is_active_idx` (`is_active`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE `greenb_cms`.`cashier` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `loginid` varchar(60) NOT NULL,
  `password` varchar(64) NOT NULL,
  `display_name` varchar(250) NOT NULL,
  `phone` varchar(50) NOT NULL,
  `address` varchar(100) DEFAULT NULL,
  `email` varchar(100) DEFAULT NULL,
  `created` datetime DEFAULT NULL,
  `modified` datetime DEFAULT NULL,
  `status` int(11) NOT NULL DEFAULT '1',

  PRIMARY KEY (`id`),
  KEY `loginid_key` (`loginid`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;



CREATE SCHEMA `greenb_printer` DEFAULT CHARACTER SET utf8 ;

CREATE TABLE `greenb_printer`.`image` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  `filename` varchar(128) NOT NULL,
  `path` varchar(128) NOT NULL,
  `mime_type` varchar(4) DEFAULT NULL,
  `display_mode` int(1) NOT NULL DEFAULT 1,
  `signature` varchar(255) not null,
  `created` datetime NULL DEFAULT NULL,
  `modified` datetime NULL DEFAULT NULL,

  PRIMARY KEY (`id`),
  KEY `id_idx` (`id`),
  KEY `signature_idx` (`signature`)

) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

ALTER TABLE `greenb_printer`.`image`
ADD COLUMN `album_id` INT(10) NOT NULL AFTER `id`;
ALTER TABLE `greenb_printer`.`image`
CHANGE COLUMN `name` `title` VARCHAR(50) NOT NULL ;


CREATE TABLE `greenb_printer`.`album` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `is_use_third_party`  varchar(20) DEFAULT NULL,
  `thrird_party_id` varchar(50) NOT NULL,
  `name` varchar(50) NOT NULL,
  `description` text DEFAULT NULL,
  `display_mode` int(1) NOT NULL DEFAULT 1,
  `created` datetime NULL DEFAULT NULL,
  `modified` datetime NULL DEFAULT NULL,

  PRIMARY KEY (`id`),
  KEY `id_idx` (`id`),
  KEY `thrird_party_id_idx` (`thrird_party_id`)

) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;